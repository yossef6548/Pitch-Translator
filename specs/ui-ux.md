# UI / UX Specification

> This document defines **all user-facing screens, components, states, interactions, and visual semantics**.
> No behavior described here contradicts or overrides the Product Spec; it is a direct UI realization of it.

---

## 0. Global UI Principles (Applies Everywhere)

### 0.1 Design philosophy

* **Immediate feedback over decoration**
* **Stability = success**, instability = error
* Pitch error must be **visible without reading text**
* Nothing should require “musical intuition” to interpret

### 0.2 Visual hierarchy

Priority order (highest → lowest):

1. Pitch correctness / deviation
2. Target reference
3. Direction of correction (up/down)
4. Numeric precision (cents, MIDI)
5. Secondary metrics

### 0.3 Color & shape rules (global invariants)

* Color is **never the sole information carrier**
* Shape + motion always accompany color
* Same pitch class ALWAYS maps to the same:

  * color
  * shape
  * iconography
    Across **all screens**, unless user explicitly edits mapping.

---

## 1. Global App Structure

### 1.1 Root navigation (persistent)

Bottom tab bar (mobile) / left sidebar (tablet/desktop):

1. **Home**
2. **Train**
3. **Analyze**
4. **Library**
5. **Settings**

Navigation labels and icons are fixed across platforms.

---

## 2. Home Screen — “Today”

### Screen ID

`HOME_TODAY`

### Purpose

* Single-entry point
* Reduce cognitive load
* Guide user into the *right* training without choice paralysis

---

### 2.1 Layout

Vertical stack:

1. **Today’s Focus Card**
2. **Quick Start Pitch Monitor**
3. **Progress Snapshot**
4. **Continue Last Session**

---

### 2.2 Components

#### 2.2.1 Today’s Focus Card

**Component ID:** `FOCUS_CARD`

* Displays:

  * Mode name (e.g. “Pitch Freezing”)
  * Goal (e.g. “Hold G3 for 8 seconds”)
  * Difficulty badge (Beginner / Standard / Advanced)
* CTA button: **Start**

Rules:

* Generated by Training Engine
* Only ONE focus shown
* User can dismiss → next best recommendation appears

---

#### 2.2.2 Quick Start Pitch Monitor

**Component ID:** `QUICK_MONITOR`

* Mini live pitch translator
* Always-on mic preview
* Shows:

  * current note
  * color halo
  * cents deviation bar (no numbers)
* Tap → opens **Live Pitch Screen** (see section 5)

Purpose:

* Let user “warm up”
* Immediate feedback even without starting a session

---

#### 2.2.3 Progress Snapshot

**Component ID:** `PROGRESS_SNAPSHOT`

Three metrics only:

* Avg cents error (7 days)
* Stability score
* Drift events per session

Each metric:

* icon
* numeric value
* small trend arrow (↑ ↓ →)

Tap → Analyze tab

---

#### 2.2.4 Continue Last Session

**Component ID:** `CONTINUE_CARD`

* Appears only if unfinished session exists
* Shows:

  * mode
  * progress %
* CTA: **Resume**

---

## 3. Train Screen — “Modes & Exercises”

### Screen ID

`TRAIN_CATALOG`

### Purpose

Explicit mode selection and structured training.

---

### 3.1 Layout

Scrollable list of **Mode Cards**, grouped:

1. Foundation
2. Awareness
3. Relative Pitch
4. Group Simulation
5. Listening / Translation

---

### 3.2 Mode Card (Reusable Component)

**Component ID:** `MODE_CARD`

Each card contains:

* Mode name
* One-line description
* Difficulty indicator
* Progress bar (mastery %)
* CTA: **Open**

Cards are **static order**, not personalized (consistency > cleverness).

---

### 3.3 Mode Entry Screens

Each mode opens a **Mode Overview Screen**:

#### Screen ID pattern

`MODE_<MODE_NAME>_OVERVIEW`
(e.g. `MODE_PITCH_FREEZE_OVERVIEW`)

---

### 3.3.1 Mode Overview Screen

Contains:

1. Mode explanation (short, visual)
2. “What you train here” bullets
3. Exercise list
4. Settings shortcut
5. Start button

---

### 3.3.2 Exercise List Item

**Component ID:** `EXERCISE_ITEM`

* Exercise name
* Target (e.g. “Hold A3 – 10s”)
* Mastery icon:

  * locked (not attempted)
  * in-progress
  * mastered
* Tap → Exercise Config → Start

---

## 4. Exercise Configuration Screen

### Screen ID

`EXERCISE_CONFIG`

### Purpose

Allow *controlled customization* without breaking training logic.

---

### 4.1 Layout

Grouped sections:

1. Target
2. Tolerance
3. Reference
4. Feedback
5. Start

---

### 4.2 Sections

#### 4.2.1 Target Section

* Pitch selector:

  * note name
  * octave
* Optional “Randomize within range” toggle

#### 4.2.2 Tolerance Section

Preset buttons:

* Lenient (±35c)
* Standard (±20c)
* Strict (±10c)

Advanced → custom slider (hidden by default)

#### 4.2.3 Reference Section

* Reference ON/OFF
* Timbre selector
* Volume slider

#### 4.2.4 Feedback Section

Toggles:

* Numeric overlay
* Shape warping
* Color flood
* Haptics

Defaults match global settings.

---

## 5. Live Pitch Screen (Core Screen)

### Screen ID

`LIVE_PITCH`

This is the **most important screen in the app**.

---

### 5.1 Layout (Portrait)

```
┌──────────────────────────┐
│ Target: G3  |  MIDI 55   │
│ ─────────────────────── │
│        Pitch Line        │
│         (centered)       │
│                          │
│        Shape + Halo      │
│                          │
│   Cents:  -12   ↓        │
│                          │
│ [ Start / Stop ]         │
└──────────────────────────┘
```

Landscape/tablet rearranges but keeps same hierarchy.

---

### 5.2 Components (Exact IDs)

#### 5.2.1 Target Header

**ID:** `TARGET_HEADER`

* Target note
* MIDI number
* Optional frequency (toggle)

#### 5.2.2 Pitch Line

**ID:** `PITCH_LINE`

Rules:

* Horizontal axis = semitones
* Center tick = target
* User dot moves smoothly
* Ghost trail (last 2 seconds)

---

#### 5.2.3 Shape + Halo

**ID:** `PITCH_SHAPE`

Rules:

* Shape = pitch class
* Size = octave
* Color = pitch class
* Stability animation tied to cents error
* Vibrato indicator overlays subtly if detected

---

#### 5.2.4 Error Readout

**ID:** `ERROR_READOUT`

Displays:

* cents value (signed)
* arrow direction
* color-coded but also arrowed

---

#### 5.2.5 Transport Controls

**ID:** `SESSION_CONTROLS`

* Start / Pause / Stop
* Restart
* Exit

---

### 5.3 States (Mandatory)

| State           | Visual Behavior             |
| --------------- | --------------------------- |
| Idle            | Neutral gray, no halo       |
| Seeking Lock    | Pulsing halo                |
| Locked          | Solid color, rigid shape    |
| Drift Candidate | Shape tremble               |
| Drift Confirmed | Shape fracture + screen dim |
| Low Confidence  | Desaturated + “?” icon      |

---

## 6. Drift Replay Screen

### Screen ID

`DRIFT_REPLAY`

Appears automatically after drift in Drift Awareness mode.

---

### 6.1 Layout

Split vertical:

**Top:** Before / After comparison
**Bottom:** Controls + metrics

---

### 6.2 Before / After Panels

Each panel shows:

* Note name
* MIDI
* Color + shape snapshot
* Mini pitch line

Between panels:

* Numeric delta:

  * +N semitones
  * +X cents

---

### 6.3 Controls

* Play reference “Before”
* Play reference “After”
* Play user snippet (if enabled)
* Resume exercise

---

## 7. Analyze Screen — History & Insight

### Screen ID

`ANALYZE_OVERVIEW`

---

### 7.1 Layout

Tabs inside Analyze:

1. Sessions
2. Trends
3. Weakness Map

---

### 7.2 Sessions Tab

**ID:** `ANALYZE_SESSIONS`

* List of sessions
* Each item:

  * mode
  * duration
  * avg cents error
  * drift count
* Tap → Session Detail

---

### 7.3 Session Detail Screen

**ID:** `SESSION_DETAIL`

Components:

* Cents error timeline graph
* Drift markers (tap to replay)
* Summary metrics card

---

### 7.4 Trends Tab

**ID:** `ANALYZE_TRENDS`

Graphs:

* Avg error over time
* Stability score
* Drift count trend

---

### 7.5 Weakness Map

**ID:** `ANALYZE_WEAKNESS_MAP`

Heatmap:

* X-axis: pitch class
* Y-axis: octave
* Color intensity = error magnitude

---

## 8. Library Screen

### Screen ID

`LIBRARY`

---

### 8.1 Sections

1. Reference Tones
2. Virtual Choir Presets
3. Imported Audio

---

### 8.2 Reference Tone Editor

**ID:** `REFERENCE_EDITOR`

* Select pitch
* Timbre
* Duration
* Loop toggle
* Preview

---

## 9. Settings Screen

### Screen ID

`SETTINGS_ROOT`

---

### 9.1 Sections (fixed order)

1. Pitch Detection
2. Feedback & Representation
3. Audio
4. Training
5. Data & Privacy
6. About

---

### 9.2 Representation Mapping Editor

**ID:** `REPRESENTATION_EDITOR`

Grid:

* Pitch classes (C → B)
* For each:

  * color picker
  * shape selector
    Preview always visible.

Warning shown:

> “Changing mapping will affect all future training.”

---

## 10. Empty, Error & Edge States (Mandatory)

### 10.1 No Mic Permission

* Full-screen block
* Explanation
* CTA: Open System Settings

### 10.2 Low Confidence

* UI stays active
* Scores paused
* Visual cue persistent

### 10.3 Background Noise Too High

* Warning banner
* Suggest headphones

---

## 11. Naming Consistency Summary

| Concept           | Name Used Everywhere |
| ----------------- | -------------------- |
| Pitch holding     | Pitch Freezing       |
| Drift             | Drift                |
| Lock              | Lock                 |
| Error unit        | Cents                |
| Numeric index     | MIDI                 |
| Live pitch screen | LIVE_PITCH           |
| Replay            | DRIFT_REPLAY         |

No synonyms allowed in UI strings.